<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reservation Timer</title>
<style>
    body {
        font-family: Arial, sans-serif;
    }
    #timerCanvas {
        width: 120px;
        height: 120px;
        margin: 10px auto;
        position: relative;
    }
    #timerCanvas canvas {
        position: absolute;
        top: 0;
        left: 0;
    }
</style>
</head>
<body>
    <h1>Reservation Timer</h1>
    <label for="dateInput">Date (YYYY-MM-DD):</label>
    <input type="text" id="dateInput">
    <button onclick="setTimers()">Set Timer</button>
    <div id="timerCanvas">
        <canvas id="progressCircle" width="120" height="120"></canvas>
    </div>

    <script>
        function startTimer(duration, message) {
            var start = Date.now();
            var timer = setInterval(function() {
                var elapsed = Date.now() - start;
                drawProgressCircle(elapsed, duration);
                if (elapsed >= duration) {
                    clearInterval(timer);
                    alert(message + ' 종료');
                    nextTimer();
                }
            }, 1000);
        }

        function nextTimer() {
            var durations = [80*60*1000, 100*60*1000, 30*60*1000, 30*60*1000, 70*60*1000];
            var messages = ["첫 번째 타이머 시작", "두 번째 타이머 시작", "세 번째 타이머 시작", "네 번째 타이머 시작", "다섯 번째 타이머 시작"];
            var currentTimerIndex = 0;

            var timer = setInterval(function() {
                startTimer(durations[currentTimerIndex], messages[currentTimerIndex]);
                currentTimerIndex++;
                if (currentTimerIndex >= durations.length) {
                    clearInterval(timer);
                }
            }, 1000);
        }

        function setTimers() {
            var inputDate = document.getElementById('dateInput').value;
            var targetDate = new Date(inputDate + " 07:30:00");
            var currentDate = new Date();
            var millisecondsToStart = targetDate - currentDate;

            if (millisecondsToStart > 0) {
                setTimeout(nextTimer, millisecondsToStart);
                alert("타이머가 설정되었습니다.");
            } else {
                alert("유효하지 않은 날짜입니다.");
            }
        }

        function drawProgressCircle(elapsed, duration) {
            var canvas = document.getElementById("progressCircle");
            var context = canvas.getContext("2d");
            var centerX = canvas.width / 2;
            var centerY = canvas.height / 2;
            var radius = canvas.width / 2 - 10;
            var progress = elapsed / duration;

            context.clearRect(0, 0, canvas.width, canvas.height);
            context.beginPath();
            context.arc(centerX, centerY, radius, Math.PI * 1.5, Math.PI * (1.5 + 2 * progress), false);
            context.lineWidth = 10;
            context.strokeStyle = '#00ff00';
            context.stroke();
        }
    </script>
</body>
</html>
